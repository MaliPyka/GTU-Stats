@echo off
chcp 65001 > nul
:: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫—É UTF-8, —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –±—ã–ª —á–∏—Ç–∞–µ–º—ã–º

if not exist .venv (
    echo üì¶ –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –°–æ–∑–¥–∞—é...
    python -m venv .venv
)

call .venv\Scripts\activate

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ watchfiles, –µ—Å–ª–∏ –Ω–µ—Ç - —Å—Ç–∞–≤–∏–º
pip show watchfiles > nul 2>&1
if %errorlevel% neq 0 (
    echo üì• –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é watchfiles –¥–ª—è –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏...
    pip install watchfiles
)

echo üöÄ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!
echo üí° –°–æ—Ö—Ä–∞–Ω–∏ –ª—é–±–æ–π .py —Ñ–∞–π–ª, –∏ —è —Å–∞–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂—É—Å—å.
echo --------------------------------------------------

watchfiles "python main.py" .
pause